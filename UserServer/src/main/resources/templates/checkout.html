<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sign In</title>
	<link rel="stylesheet" href="style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
	<header>
		<h1>CartCrafters</h1>
	</header>
	
	<div class="container">
		<table id="userInfo" border="1">
		<tr>
			<th>First Name</th>
			<th>Last Name</th>
			<th>Address</th>
			<th>Postal</th>
			<th>City</th>
			<th>Province</th>
			<th>Country</th>
		</tr>
		</table>
	</div>
	
	<div class="container">
		<table id="itemInfo" border="1">
		<tr>
			<th>Item Name</th>
			<th>Total Price</th>
			<th>Shipping</th>
		</tr>
		</table>
	</div>
	
	<p> PROMO: FREE SHIPPING on all orders now until December 20th!!!</p>
	
	<form id="addUserForm">
		<label for="fName">Credit Card #:</label>
		<input type="text" id="fName" name="fName" required><br>
		<label for="lName">Name on Card:</label>
		<input type="text" id="lName" name="lName" required><br>
		<label for="address">Expiration Date:</label>
		<input type="text" id="address" name="address" required><br>
		<label for="postal">Security Code:</label>
		<input type="text" id="postal" name="postal" required><br>
		<input type="submit" value="Submit">
	</form>
	
	
	<p id="confirmationMessage"></p>
	
	
	<script>
		
		$(document).ready(function(){
			$.ajax({
				url: "http://localhost:8080/user/checkout-get-username",
				type: 'GET',
				success: function(result){
					var checkout_user = {
						username: result
					};
					$.ajax({
						url: "http://localhost:8080/user/get-username",
						type: 'GET',
						data: checkout_user,
						success: function(results) {
						var table = $("#userInfo");
							results.forEach(function(user){
								var row = $("<tr></tr>");
								row.append($("<td></td>").text(user.fName));
								row.append($("<td></td>").text(user.lName));
								row.append($("<td></td>").text(user.address));
								row.append($("<td></td>").text(user.postal));
								row.append($("<td></td>").text(user.city));
								row.append($("<td></td>").text(user.province));
								row.append($("<td></td>").text(user.country));
								table.append(row);
							});
						},
						error: function(error) {
							console.log(error);
						}
					})
					

				}, error: function(error){
					console.log(error);
				}
			});
			
			var checkout_item = {
				itemID: 13
			};
			$.ajax({
				url: "http://localhost:9090/item/get-id",
				type: 'GET',
				data: checkout_item,
				success: function(results) {
				var table = $("#itemInfo");
				results.forEach(function(item){
					var row = $("<tr></tr>");
					row.append($("<td></td>").text(item.name));
					row.append($("<td></td>").text(item.price));
					table.append(row);
					});
				},
				error: function(error) {
					console.log(error);
				}
			})	
			
		});
	</script>
	

</body>
</html>